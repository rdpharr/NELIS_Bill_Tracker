<h2>{{title}}</h2>
<table id="resultsTable" class="table table-striped table-bordered display responsive" style="width:100%">
    <thead>
    <tr>
        <th>Bill</th>
        <th>Summary</th>
        <th>Introduced</th>
        <th>Most Recent Action</th>
        <th>Hearings</th>
    </tr>
    </thead>
    <tbody>
    {{#each data}}
        <tr>
            <td><a href="https://www.leg.state.nv.us{{this.url}}">{{this.bill}}</a></td>
            <td>{{this.summary}}</td>
            <td>{{this.introduced}}</td>
            <td>{{this.most_recent_action}}</td>
            <td>{{this.upcoming_hearings}}</td>
        </tr>
    {{/each}}
    </tbody>
</table>
<script>
    $(document).ready(function () {
        $.fn.dataTable.ext.errMode = 'none';
        let table = $('#resultsTable').DataTable({
            fixedHeader: true,
            autoWidth: true,
            dom: 'Bltip',
            buttons: [
                'csvHtml5',
                'excelHtml5',
                'pdfHtml5'
            ],
        });
        $('#resultsTable thead tr').clone(true).appendTo('#resultsTable thead');
        $('#resultsTable thead tr:eq(1) th').each(function (i) {
            var title = $(this).text();
            $(this).html('<input type="text" placeholder="Search ' + title + '" style="width:90%" />');
            $('input', this).on('keyup change', function () {
                if (table.column(i).search() !== this.value) {
                    table
                            .column(i)
                            .search(this.value)
                            .draw();
                }
            });
        });
    });
</script>
